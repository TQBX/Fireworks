(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),i=n.n(o);i.a},"07a4":function(e,t,n){"use strict";var o=n("2b0e"),i=n("2f62");o["default"].use(i["a"]);var s=new i["a"].Store({state:{userInfo:{username:"",password:"",uuid:"",token:null}},mutations:{setToken:function(e,t){e.userInfo.token=t},removeToken:function(e){e.userInfo.token=null},setUserInfo:function(e,t){e.userInfo=t}},actions:{asyRemoveToken:function(e){setTimeout((function(){e.commit("removeToken")}),1e3)},asySetToken:function(e,t){setTimeout((function(){e.commit("setToken",t)}),2e3)}},getters:{token:function(e){return e.userInfo.token}}});t["a"]=s},"11d4":function(e,t,n){"use strict";var o=n("a8de"),i=n.n(o);i.a},2154:function(e,t,n){},"2d3b":function(e,t,n){e.exports=n.p+"static/img/welcome.49cd843e.jpg"},"4ee2":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fillContent",attrs:{id:"app"}},[n("head-nav",{ref:"headNode",class:{isHide:e.isHide}}),n("router-view")],1)},s=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"headerNav"},[n("ul",{staticClass:"navBox"},[n("li",[n("router-link",{attrs:{to:"/user/welcome"}},[e._v("我的主页")])],1),n("li",[n("router-link",{attrs:{to:"/user/register"}},[e._v("注册")])],1),n("li",[n("router-link",{attrs:{to:"/user/login"}},[e._v("登录")])],1),n("li",[n("router-link",{attrs:{to:"/user/photoWall"}},[e._v("照片墙")])],1)])])},r=[],l=n("dd7b"),c=n("73f0"),u={name:"headerNav",data:function(){return{}},components:{login:l["default"],welcome:c["default"]}},d=u,m=(n("11d4"),n("2877")),h=Object(m["a"])(d,a,r,!1,null,"e4800e86",null),g=h.exports,f={name:"App",data:function(){return{isShow:this.$store.state.show,isHide:!1}},methods:{handleWheel:function(e){var t=e.wheelDelta||40*-e.deltaY;console.log(t,this.isHide),this.isHide=t<0},test:function(e){this.isHide=e.clientY>60}},mounted:function(){window.addEventListener("wheel",this.handleWheel),document.addEventListener("mousemove",this.test)},beforeDestroy:function(){window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("mousemove",this.test)},components:{headNav:g}},p=f,v=(n("034f"),Object(m["a"])(p,i,s,!1,null,null,null)),w=v.exports,b=n("07a4"),k=(n("d3b7"),n("8c4f")),T=n("a78e"),A=n.n(T),C=function(){return Promise.resolve().then(n.bind(null,"dd7b"))},S=function(){return Promise.resolve().then(n.bind(null,"73f0"))},F=function(){return n.e("chunk-248be00a").then(n.bind(null,"3c09"))},y=function(){return n.e("chunk-248be00a").then(n.bind(null,"7803"))},x=function(){return n.e("chunk-248be00a").then(n.bind(null,"cd0d"))};o["default"].use(k["a"]);var E=new k["a"]({mode:"history",routes:[{path:"/user/login",name:"login",component:C},{path:"/user/register",name:"register",component:y},{path:"/user/welcome",name:"welcome",meta:{requireAuth:!1},component:S},{path:"/user/photoWall",name:"photoWall",meta:{requireAuth:!0},component:x},{path:"/admin",name:"admin",component:x,hidden:!0,children:[{path:"login",name:"admin_login",component:C},{path:"manage",name:"manage",component:y,meta:{requireAuth:!0}}]},{path:"*",component:F}]});E.beforeEach((function(e,t,n){e.meta.requireAuth?b["a"].state.token||A.a.get("token")?n():n({path:"/user/login",query:{redirect:e.fullPath}}):n()}));var I=E,B=n("5c96"),N=n.n(B),P=(n("0fae"),n("bc3a")),U=n.n(P),j=(n("4ee2"),n("6672"),n("a2f0"),n("77ed")),q=n.n(j);o["default"].prototype.$axios=U.a,o["default"].use(N.a),o["default"].use(q.a),o["default"].config.productionTip=!1,new o["default"]({el:"#app",router:I,store:b["a"],render:function(e){return e(w)}})},6672:function(e,t,n){},"66c0":function(e,t,n){"use strict";var o=n("2154"),i=n.n(o);i.a},"73f0":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"welcome",on:{wheel:e.scrollToTop}},[o("img",{directives:[{name:"show",rawName:"v-show",value:e.inStillShow,expression:"inStillShow"}],ref:"imgNode",staticClass:"allView",attrs:{src:n("2d3b")}})])},i=[],s=(n("99af"),{name:"loading",data:function(){return{inStillShow:!0,scrollValue:1,imageHeight:"",isUp:!0,count:0,firstIn:!0}},methods:{scrollToTop:function(e){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;console.log("firstIn:".concat(this.firstIn,", this.inStillShow:").concat(this.inStillShow,", scrollTop:").concat(t,", this.isUp:").concat(this.isUp,", this.count:").concat(this.count)),!0===this.isUp&&0===t&&this.count++,t>this.imageHeight+50&&!0===this.firstIn&&(this.inStillShow=!1,this.firstIn=!1,window.scrollTo(0,0)),t>this.imageHeight+50&&!1===this.firstIn&&!1===this.inStillShow&&(this.inStillShow=!1,this.count=0),0===t&&this.count>=10&&(window.scrollTo(0,this.imageHeight),this.inStillShow=!0,this.firstIn=!1,this.count=-9999)},judgeIsUp:function(e){var t=e.wheelDelta||40*-e.deltaY;this.isUp=t>0}},mounted:function(){this.$refs.imgNode.style.height=screen.availHeight+"px",console.log(screen.availHeight,this.$refs.imgNode.style.height),this.imageHeight=this.$refs.imgNode.offsetHeight,window.addEventListener("scroll",this.scrollToTop),window,addEventListener("wheel",this.judgeIsUp)},destroyed:function(){window.removeEventListener("scroll",this.scrollToTop),window,removeEventListener("wheel",this.judgeIsUp)}}),a=s,r=n("2877"),l=Object(r["a"])(a,o,i,!1,null,"a7515896",null);t["default"]=l.exports},"855a":function(e,t,n){e.exports=n.p+"static/img/user_pic.870d15b1.jpg"},"85ec":function(e,t,n){},a2f0:function(e,t,n){},a417:function(e,t,n){"use strict";var o={user:"/user",admin:"/admin"};t["a"]=o},a8de:function(e,t,n){},dd7b:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content",class:{bg:e.isBg}},[o("div",{staticClass:"loading-layer"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"load_box"},[o("div",{staticClass:"top-img-wrapper"},[o("img",{staticClass:"pic ",class:[{playState:e.isPause},{loading:e.isLoading}],attrs:{src:n("855a")},on:{click:e.toggleStates}})]),o("el-form",{ref:"loginFromNode",staticClass:"use_pass_list",attrs:{model:e.loginFrom,rules:e.rules}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{type:"text",name:"username",placeholder:"请输入用户名"},model:{value:e.loginFrom.username,callback:function(t){e.$set(e.loginFrom,"username",t)},expression:"loginFrom.username"}})],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",name:"password",placeholder:"请输入密码"},model:{value:e.loginFrom.password,callback:function(t){e.$set(e.loginFrom,"password",t)},expression:"loginFrom.password"}})],1)],1),o("div",{staticClass:"button_box"},[o("button",{staticClass:"el-but",on:{click:function(t){return e.goToRoute("/user/register")}}},[e._v("注册")]),o("button",{staticClass:"el-but",on:{click:function(t){return e.handleLogin("loginFromNode")}}},[e._v("登录")]),o("el-checkbox",{attrs:{id:"remember"},model:{value:e.loginFrom.isRemember,callback:function(t){e.$set(e.loginFrom,"isRemember",t)},expression:"loginFrom.isRemember"}},[e._v("记住密码 ")]),o("span",{on:{click:function(t){return e.goToRoute("/user/register")}}},[e._v("还没有账号？")])],1),e._m(0)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],staticClass:"as"},[o("img",{staticClass:"pic",class:[{playState:e.isPause},{loading:e.isLoading}],attrs:{src:n("855a")},on:{click:e.cancelLogin}}),o("div",{staticClass:"loadingTips"},[e._v("登陆中· · ·")]),o("div",{staticClass:"loadingTips",staticStyle:{"padding-top":"20px"}},[e._v("点击头像可以取消登录")])])]),o("router-view")],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"load-bottom-wrapper clearfix"},[n("li",[n("a",{attrs:{href:""}},[e._v("意见反馈")])]),n("li",[e._v("|")]),n("li",[n("a",{attrs:{href:"##"}},[e._v("忘记密码")])])])}],s=n("f35d"),a=n("a417"),r=function(e){return Object(s["a"])({method:"post",url:"".concat(a["a"].user,"/login"),data:e})},l=function(){return Object(s["a"])({method:"post",url:"".concat(a["a"].user,"/active")})},c=n("720d"),u=n.n(c),d="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDD2ODlQYY0qaqgGmDa7aTXTxGk\nJG1PjBTNnuZVYhgNl9tR4EV8FfSESs1HFW1Gf6lEiG1THZTIlVVrJQIqA4YZfXtA\n+4qurS6QGb5cPN2VFKOufvvC9TNCHf0cyZWvePVPCaU6U2XPNRfBagnWfUFqZe26\n+bfZpmjzy4JONr+teQIDAQAB",m="MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAMPY4OVBhjSpqqAa\nYNrtpNdPEaQkbU+MFM2e5lViGA2X21HgRXwV9IRKzUcVbUZ/qUSIbVMdlMiVVWsl\nAioDhhl9e0D7iq6tLpAZvlw83ZUUo65++8L1M0Id/RzJla949U8JpTpTZc81F8Fq\nCdZ9QWpl7br5t9mmaPPLgk42v615AgMBAAECgYBkdlIXB9+iEA6Yhi983j6au9Ke\n0pjIH2FkgMhCsEkKYAV/IH5EQrblTcGzXwhpC392ykzaP+hcZE4m4hsUFi6o6RRx\n/UO2rJBuz6se0IfYygMDJf9W8la5WrhcS62cFyrjLQQ+6nwDCh7Cmy1IEekz2Oo6\n7EYt20eT4k1aWzB/AQJBAP7BSb8PlxJzMvlKfxqypVz0gLGtl72lvWdUj8SZD7jE\nsvJt9UZ3zYTz4hwzHuV2pUKJyqsh3gPBFNRy3Fab9okCQQDEzeTDuZTDDWWf0jHA\n700X5LAlth8FMJ4+PMqUHlRjGNkxpO0ALNlT5Nhj4JeGW/1GX3pBgpwGpQOb9e3+\n0kNxAkAobkKm+PFv8yp21/TeJtYJr6AxEqzPY1tw58G9YNFW8Ji50uunWGIcpJwQ\n/6f6oN7PdZDdog1bKSyGHwiLEkuJAkEAp/U7xlpMfkahs0sVER5pgfm25whN4wUC\nGAWTseNMi6I6QmcJqPudoj6M+nhDePRq7DMxyFTqSbVsph61taLG0QJBAK1OVGGq\nHpOAzziwLGpVwoGm6FEqREziZNQmeId7dH7ynyZnnnGmWhg+6yS2Yft3t/TcZXuu\nt9VT8mOaDvyX9j8=";function h(e){var t=new u.a;return t.setPublicKey(d),t.encrypt(e)}function g(e){var t=new u.a;return t.setPrivateKey(m),t.decrypt(e)}var f=n("a78e"),p=n.n(f),v=n("07a4"),w=n("5c96");function b(){var e=this;return w["MessageBox"].alert("请核对账号密码","错误提醒",{confirmButtonText:"确定",callback:function(){e.$message({type:"info",message:"请重新输入账号密码",center:!0})}})}function k(){return w["MessageBox"].prompt("请输入激活码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{5}$/})}var T={name:"login",data:function(){return{rules:{username:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:20,message:"长度在 3 到 10 个字符",trigger:"blur"},{required:!0,pattern:/^[\u4e00-\u9fa5_a-zA-Z0-9.·-]+$/,message:"请输入正确的账号/昵称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{required:!0,pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/,message:"密码应该是包含 数字和英文，长度6-20",trigger:"blur"}]},loginFrom:{username:"admin",password:"zyw123123",code:"",uuid:"",isRemember:!1},validateCode:{validateCode:""},isPause:!1,isLoading:!1,isBg:!1,isShow:!0,isCancel:!1}},created:function(){this.getCookie()},methods:{getCookie:function(){var e=p.a.get("username"),t=p.a.get("password"),n=p.a.get("isRemember");this.loginFrom={username:void 0===e?this.loginFrom.username:e,password:void 0===t?this.loginFrom.password:g(t),isRemember:void 0!==n&&Boolean(n)}},setUserInfo:function(e){v["a"].commit("setUserInfo",e)},setCookie:function(){p.a.set("username",this.loginFrom.username),p.a.set("password",this.loginFrom.password),p.a.set("isRemember",this.loginFrom.isRemember),p.a.set("token",this.loginFrom.token),p.a.set("uuid",this.loginFrom.uuid)},removeCookies:function(){p.a.remove("username"),p.a.remove("password"),p.a.remove("isRemember"),p.a.remove("token"),p.a.remove("uuid")},goToRoute:function(e){this.$router.push(e)},handleLogin:function(){var e=this;this.$refs.loginFromNode.validate((function(t){if(!t)return b(),!1;e.isCancel=!1,e.loginFrom.isRemember?(p.a.set("username",e.loginFrom.username,{expires:15}),p.a.set("password",h(e.loginFrom.password),{expires:15}),p.a.set("isRemember",e.loginFrom.isRemember,{expires:15})):e.removeCookies(),e.loginAnimationToggle(),r(e.loginFrom).then((function(t){200==t.data.code?(e.loginAnimationToggle(),e.loginFrom.uuid=t.data.uuid,e.loginFrom.token=t.data.token,e.setUserInfo(),e.setCookie(),e.goToRoute("/welcome")):"账号未激活"==t.data.message?(e.enterValidateCode(),e.$alert("请前往你预留的邮箱获取激活码")):e.loginAnimationToggle()})).catch((function(t){e.$message({type:"info",message:"请重新输入账号密码",center:!0}),e.cancelLogin()}))}))},enterValidateCode:function(){var e=this;k().then((function(t){e.validateCode.validateCode=t,l(e.validateCode).then((function(t){(t.data.code=200)?e.$router.push("/welcome"):(t.data.data="激活码错误")&&e.$message("请输入正确的激活码")})).catch((function(t){e.$message("遇到未知错误")}))})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},toggleStates:function(){this.isPause=!this.isPause},loginAnimationToggle:function(){this.isBg=!this.isBg,this.isLoading=!this.isLoading,this.isShow=!this.isShow,!0===this.isCancel?(this.isBg=!1,this.isLoading=!1,this.isShow=!0):(this.isBg=!0,this.isLoading=!0,this.isShow=!1)},cancelLogin:function(){this.isCancel=!0,this.loginAnimationToggle()}}},A=T,C=(n("66c0"),n("2877")),S=Object(C["a"])(A,o,i,!1,null,null,null);t["default"]=S.exports},f35d:function(e,t,n){"use strict";n("d3b7");var o=n("bc3a"),i=n.n(o),s=n("07a4"),a=n("5c96"),r=n("a78e"),l=n.n(r),c="Admin-Token";function u(){return l.a.get(c)}var d={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"},m=void 0;i.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var h=i.a.create({timeout:6e3,headers:{"cache-control":"no-cache",Pragma:"no-cache"}});h.interceptors.request.use((function(e){return(s["a"].state.token||u())&&(e.headers["admin-token"]=u()),e}),(function(e){console.log(e),Promise.reject(e)})),h.interceptors.response.use((function(e){var t=e.data.code||200,n=d[t]||e.data.msg||d["default"];if(401!==t)return 500===t?(Object(a["Message"])({message:n,type:"error"}),Promise.reject(new Error(n))):200!==t?(a["Notification"].error({title:n}),Promise.reject("error")):e.data;a["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){m.$store.dispatch("asyRemoveToken").then((function(){location.reload()}))}))}),(function(e){return console.log("err"+e),Object(a["Message"])({message:e.message,type:"error",duration:3e3}),Promise.reject(e)}));t["a"]=h}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);